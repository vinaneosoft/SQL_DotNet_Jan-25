create or replace PROCEDURE get_department_byid ( emp_id IN number,  dept_id OUT varchar)      
IS 
BEGIN 
  select dept_code into dept_id from employees where employees_id=emp_id; 
EXCEPTION 
	when others then 
    	 dbms_output.put_line( SQLERRM ); 
END ;

DECLARE
dcode varchar(20);
BEGIN
get_department_byid(5555, dcode);
dbms_output.put_line(dcode);

END;



create or replace PROCEDURE get_department_byid ( emp_id IN number,  dept_id OUT varchar)      
IS 
BEGIN 
  select dept_code into dept_id from employees where employees_id=emp_id; 
END ;



DECLARE
dcode varchar(20);
BEGIN
dbms_output.put_line('calling procedure to get department code '); 
get_department_byid(121, dcode);
dbms_output.put_line(dcode);
exception 
    when others then
    dbms_output.put_line(sqlerrm);
END;



Q. increment budget by passedvalue of department with id passed to procdure. Also return old budget as well as updated budget
    dept code and increase amount pass to procedure
    and get old budget and updated budget from procedure

CREATE OR REPLACE PROCEDURE update_deptbudget(dept_id in varchar, amount in number, old_bdgt out number, new_bdgt out number) IS
BEGIN
    select d_budget into old_bdgt from departments where d_code = dept_id;
	update departments set d_budget=d_budget+amount  where d_code = dept_id;
    select d_budget into new_bdgt from departments where d_code = dept_id;
END;


declare
    d_code varchar(20) := 'HR';
    amount number := 300000;
    o_bdgt departments.d_budget%type;
    n_bdgt departments.d_budget%type;
begin
    update_deptbudget(d_code, amount, o_bdgt, n_bdgt);
    dbms_output.put_line('Original : ' || o_bdgt || ' and Updated : ' || n_bdgt);
end;




