create table total_salarycommission(dept_code varchar(4) references departments(d_code) on delete cascade, total_salary number not null, total_commission number not null);

insert into total_salarycommission  
select dept_code, sum(salary),sum(commission) from employees group by dept_code;





   	CREATE OR REPLACE TRIGGER departments_salary_commission
    AFTER 
    insert or UPDATE OR DELETE 
    ON employees
    begin
     	delete from TOTAL_SALARYCOMMISSION;
    	insert into total_salarycommission  
        select dept_code, sum(salary),sum(commission) from employees group by dept_code;
	end;


delete from employees where employees_id=111;   /*stmt : 1, number of rows : 1 trigger*/
update employees set salary=salary+5000 where salary<=60000;  /* stmt :1,  rows affect : n  trigger*/

select * from TOTAL_SALARYCOMMISSION;

insert into employees values(7878, 'Meera', 'Kumari', 'Pune', 45, 45000,5000,'HR');
insert into employees values(4545, 'Meera', 'Kumari', 'Pune', 45, 45000,null,'HR');



declare
    ids SYS.ODCINUMBERLIST:=SYS.ODCINUMBERLIST(4444,5555,1111,2222);
begin
	FOR i IN 1 .. ids.COUNT 
    LOOP
    	insert into employees(employees_id, salary, commission) values(ids(i), 50000, 2000);
  	END LOOP;
end;


create table oldemployees(emp_id number primary key, salary number, commission number, dept_code varchar(10));

insert into oldemployees values(1111, 45000,2000, 'SM');
insert into oldemployees values(2222, 45000,2000, 'HR');
insert into oldemployees values(3333, 45000,2000,'LD');

insert into employees(employees_id, salary, commission, dept_code)
select * from oldemployees; 
/*statement is 1,  number if rows affected 3 ,  stmt level trigger : 1 time gets fired*/

insert / update /delete on table's particular column

row level trigger,   same table update

instead of

before

on viewname


